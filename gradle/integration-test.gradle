sourceSets {
  integrationTest {
    java.srcDir file('src/integTest/java')
    resources.srcDir file('src/integTest/resources')
    compileClasspath += sourceSets.main.output + configurations.testRuntimeClasspath
    runtimeClasspath += output + compileClasspath
  }
}

task integrationTest(type: Test) {
  description = 'Runs the integration tests.'
  group = 'verification'
  testClassesDirs = sourceSets.integrationTest.output.classesDirs
  classpath = sourceSets.integrationTest.runtimeClasspath
  maxHeapSize = '1536m'
  mustRunAfter test
}

task it1(type: Test) {
  description = 'Runs small batch of integration tests.'
  group = 'verification'
  testClassesDirs = sourceSets.integrationTest.output.classesDirs
  classpath = sourceSets.integrationTest.runtimeClasspath
  maxHeapSize = '1536m'
  mustRunAfter test
  // @TODO the setting below is wrong, but not sure how to filter the tests...
  //includes = '**/ScanIT_Gradle_Versions_4_2*.class'

}

check.dependsOn integrationTest
